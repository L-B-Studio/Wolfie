<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Wolfie.Pages.LoginPage">
    <VerticalStackLayout Spacing="15" x:Name="MainLayout" BackgroundColor="White">

        <!-- ===== Верхняя панель с логотипом, темой и кнопкой назад ===== -->
        <Grid Padding="10" ColumnSpacing="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Центрированный логотип и текст -->
            <StackLayout Grid.Column="0" Orientation="Horizontal" HorizontalOptions="Center" VerticalOptions="Center">
                <Image x:Name="Logo"
                   Source="logo.png"
                   WidthRequest="40"
                   HeightRequest="40"
                   Margin="45,0,0,0"
                   VerticalOptions="Center"/>

                <VerticalStackLayout Padding="10,0,0,0" VerticalOptions="Center">
                    <Label x:Name="TitleLabel"
                       Text="Onlygram"
                       FontSize="24"
                       FontFamily="MetalMania"
                       TextColor="Black"
                       HorizontalOptions="Center"/>
                    <Label x:Name="SubTitleLabel"
                       Text="by LB Studio"
                       FontSize="12"
                       FontFamily="MetalMania"
                       TextColor="Black"
                       HorizontalOptions="Center"/>
                </VerticalStackLayout>
            </StackLayout>

            <!-- Кнопка смены темы -->
            <ImageButton x:Name="ThemeButton"
                     Grid.Column="2"
                     Source="moon.png"
                     WidthRequest="40"
                     HeightRequest="40"
                     BackgroundColor="Transparent"
                     Clicked="OnThemeClicked"
                     HorizontalOptions="End"
                     VerticalOptions="Center"/>
        </Grid>

        <!-- ===== Основной контент ===== -->
        <Label x:Name="EnterAccountLabel"
           Text="Enter in Account"
           FontFamily="MetalMania"
           FontSize="20"
           FontAttributes="Bold"
           HorizontalOptions="Center"
           TextColor="Black"
           Margin="0,10,0,0"/>

        <Label x:Name="EmailLabel"
           Text="Email:" FontFamily="PollerOne" FontSize="16"
           HorizontalOptions="Start" TextColor="Black" Margin="20,0,0,0"/>

        <Entry x:Name="EmailEntry"
           Placeholder="anonym@gmail.com"
           PlaceholderColor="Gray"
           BackgroundColor="#F5F5F5"
           TextColor="Black"
           HeightRequest="48"/>

        <Label x:Name="PassLabel"
           Text="Password:" FontFamily="PollerOne" FontSize="16"
           HorizontalOptions="Start" TextColor="Black" Margin="20,0,0,0"/>

        <Entry x:Name="PasswordEntry"
           Placeholder="Введите пароль"
           IsPassword="True"
           BackgroundColor="#F5F5F5"
           TextColor="Black"
           HeightRequest="48"/>
        <!-- Забыл пароль -->
        <Button Text="Забыли пароль?" 
    FontSize="14" 
    HorizontalOptions="End" 
    TextColor="Blue"
    BackgroundColor="Transparent"
    Clicked="ForgotPasswordCkicked"/>

        <Button x:Name="LoginButton"
            Text="Login"
            BackgroundColor="Black"
            TextColor="White"
            CornerRadius="8"
            HeightRequest="48"
            Clicked="LoginButtonClicked"
            Margin="0,20,0,0"/>
        <!-- Разделитель -->
        <Label x:Name="OrLable"
        Text="Or" 
    HorizontalOptions="Center" 
    FontSize="14" 
    TextColor="Black"/>

        <!-- Кнопка Зарегистрироваться -->
        <Button x:Name="RegistrationButton" 
        Text="Registration"
     BackgroundColor="Black"
     TextColor="White"
     CornerRadius="8"
     HeightRequest="48"
     Clicked="RegistrationButtonClicked"/>

        <!-- ===== Соглашение ===== -->
        <StackLayout Orientation="Horizontal" Margin="10" HorizontalOptions="Center">
            <CheckBox x:Name="AgreeCheckBox"
                  VerticalOptions="Start"
                  Color="Blue"/>

            <Label VerticalOptions="Start">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="Я соглашаюсь с "
                          x:Name="AgreeSpan"
                          TextColor="Black"/>
                        <Span Text="Условиями использования&#x0a;"
                          TextDecorations="Underline"
                          TextColor="Blue">
                            <Span.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnTermsTapped"/>
                            </Span.GestureRecognizers>
                        </Span>
                        <Span Text="и "
                          x:Name="AndSpan"
                          TextColor="Black"/>
                        <Span Text="Политикой конфиденциальности"
                          TextDecorations="Underline"
                          TextColor="Blue">
                            <Span.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnPrivacyTapped"/>
                            </Span.GestureRecognizers>
                        </Span>
                    </FormattedString>
                </Label.FormattedText>
            </Label>
        </StackLayout>

    </VerticalStackLayout>
</ContentPage>