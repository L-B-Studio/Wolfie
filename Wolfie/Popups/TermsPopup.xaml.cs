using CommunityToolkit.Maui.Views;

namespace Wolfie.Popups;

    public partial class TermsPopup : Popup
    {
        public TermsPopup()
        {
            InitializeComponent();

            // Нативный контент для каждой вкладки (можно вынести в ресурсы/локализацию)
            TabsCarousel.ItemsSource = new[]
            {
                GetGeneralText(),
                GetDataText(),
                GetUsageText(),
                GetRightsText()
            };

            TabsCarousel.PositionChanged += TabsCarousel_PositionChanged;
            UpdateTabHeaderStates(0);
        }

        void TabsCarousel_PositionChanged(object sender, PositionChangedEventArgs e)
        {
            UpdateTabHeaderStates(e.CurrentPosition);
        }

        void UpdateTabHeaderStates(int activeIndex)
        {
            // Простая визуальная индикация: фон активной кнопки
            TabBtnGeneral.BackgroundColor = activeIndex == 0 ? Colors.LightGray : Colors.Transparent;
            TabBtnData.BackgroundColor = activeIndex == 1 ? Colors.LightGray : Colors.Transparent;
            TabBtnUsage.BackgroundColor = activeIndex == 2 ? Colors.LightGray : Colors.Transparent;
            TabBtnRights.BackgroundColor = activeIndex == 3 ? Colors.LightGray : Colors.Transparent;
        }

        void OnTabHeaderClicked(object sender, EventArgs e)
        {
            if (sender == TabBtnGeneral) TabsCarousel.Position = 0;
            if (sender == TabBtnData) TabsCarousel.Position = 1;
            if (sender == TabBtnUsage) TabsCarousel.Position = 2;
            if (sender == TabBtnRights) TabsCarousel.Position = 3;
        }

        // Замените эти строки на полный текст каждой вкладки (или подтяните из ресурсов)
        string GetGeneralText() => "1. Общие положения\r\n\r\nНастоящая Политика использования регулирует условия доступа и использования нашего приложения " +
        "(далее — «Сервис»). Используя приложение, вы подтверждаете, что ознакомились с данным документом, понимаете его содержание и соглашаетесь соблюдать все правила, " +
        "описанные ниже.\r\n\r\nСервис предоставляет возможность обмена сообщениями, медиафайлами, вызовами и использования других функций, направленных на коммуникацию между " +
        "пользователями. Мы оставляем за собой право обновлять, изменять и расширять функциональность приложения.";
        string GetDataText() => "2. Регистрация и аккаунт пользователя\r\n" +
        "2.1. Условия регистрации\r\n\r\nДля использования Сервиса вы должны создать аккаунт. При регистрации пользователь предоставляет достоверные данные " +
        "(email, номер телефона, имя или псевдоним).\r\n\r\n2.2. Ответственность за аккаунт\r\n\r\nПользователь обязуется хранить данные для входа в тайне.\r\n\r\n" +
        "Любые действия, совершённые под вашим аккаунтом, считаются выполненными вами.\r\n\r\nВ случае подозрения на взлом вы обязаны немедленно уведомить службу поддержки.\r\n\r\n" +
        "2.3. Ограничения по возрасту\r\n\r\nПользоваться приложением могут лица старше 13 лет. Для пользователей младше 16 лет может потребоваться согласие родителей " +
        "(в зависимости от законодательства страны).";
        string GetUsageText() => "3. Использование сервиса\r\n" +
        "3.1. Правомерное использование\r\n\r\nПользователь обязуется использовать приложение только законными способами и не нарушать права других лиц.\r\n\r\n" +
        "Запрещается:\r\n\r\nраспространять вредоносный контент или ПО\r\n\r\nотправлять спам, мошеннические сообщения, угрозы\r\n\r\nнарушать авторские права\r\n\r\n" +
        "использовать сервис для незаконных или вредоносных действий\r\n\r\nпытаться нарушить работу сервиса или его безопасность\r\n\r\n" +
        "создавать фейковые аккаунты или выдавать себя за других людей\r\n\r\n3.2. Пользовательский контент\r\n\r\n" +
        "Вы несёте полную ответственность за контент, который отправляете:\r\n\r\nсообщения\r\n\r\nизображения\r\n\r\nфайлы\r\n\r\nссылки\r\n\r\nголосовые и видео материалы\r\n\r\n" +
        "Мы не осуществляем цензуру сообщений, но можем ограничивать доступ к аккаунту при нарушениях.\r\n\r\n3.3. Ограничения функциональности\r\n\r\n" +
        "Мы оставляем за собой право:\r\n\r\nблокировать нарушение правил\r\n\r\nограничивать отправку сообщений при подозрительной активности\r\n\r\n" +
        "временно отключать функции для технических работ\r\n\r\nвводить лимиты по объёму хранимых данных\r\n\r\n4. Платежи и премиум-функции (если есть)\r\n\r\n" +
        "Если приложение предусматривает платные функции:\r\n\r\nоплата производится через Google Play / App Store\r\n\r\nиспользуемые методы оплаты защищены\r\n\r\n" +
        "возвраты регулируются правилами соответствующих магазинов\r\n\r\nВсе цены могут изменяться, но пользователь всегда будет уведомлён до списания средств.\r\n\r\n" +
        "5. Права и обязанности пользователей\r\nПользователь имеет право:\r\n\r\nпользоваться всеми доступными функциями приложения\r\n\r\nполучать техническую поддержку\r\n\r\n" +
        "удалять аккаунт в любой момент\r\n\r\nзащищать свои данные в рамках закона\r\n\r\nобращаться с жалобами на других пользователей\r\n\r\nПользователь обязан:\r\n\r\n" +
        "соблюдать правила Сервиса\r\n\r\nне нарушать закон\r\n\r\nуважать других пользователей\r\n\r\nпредоставлять правдивую информацию\r\n\r\n" +
        "не использовать приложение для вреда окружающим\r\n\r\n6. Права и обязанности администрации сервиса\r\nМы имеем право:\r\n\r\n" +
        "ограничивать или блокировать аккаунты при нарушении правил\r\n\r\nудалять незаконный, опасный или противоправный контент\r\n\r\n" +
        "приостанавливать работу сервиса для технических работ\r\n\r\nобновлять приложение и изменять функции\r\n\r\nотказывать в регистрации при нарушениях\r\n\r\n" +
        "Мы обязуемся:\r\n\r\nобеспечивать стабильную работу приложения\r\n\r\nзащищать данные пользователей\r\n\r\nсвоевременно реагировать на обращения\r\n\r\n" +
        "уведомлять о значимых изменениях политики\r\n\r\n7. Ограничение ответственности\r\n\r\nМы не несём ответственность за:\r\n\r\n" +
        "перебои в интернет-соединении у пользователя\r\n\r\nотключение сервера по техническим причинам\r\n\r\nпотерю данных, вызванную действиями пользователя\r\n\r\n" +
        "контент, который создают и отправляют пользователи\r\n\r\nвред, нанесённый третьими лицами через незаконное использование аккаунта\r\n\r\n" +
        "Сервис предоставляется «как есть». Мы стремимся обеспечить стабильную работу, но не гарантируем 100% безошибочность.\r\n\r\n8. Безопасность\r\n\r\n" +
        "Мы применяем современные методы защиты:\r\n\r\nшифрование соединения\r\n\r\nпостоянный аудит безопасности\r\n\r\nзащита от взломов и несанкционированного доступа\r\n\r\n" +
        "фильтрация вредоносной активности\r\n\r\nОднако вы также обязаны соблюдать меры предосторожности:\r\n" +
        "не передавать пароль, не открывать неизвестные ссылки и использовать актуальные версии приложения.\r\n\r\n" +
        "9. Прекращение использования\r\n\r\nПользователь может:\r\n\r\nпрекратить использование приложения в любой момент\r\n\r\nудалить аккаунт со всеми данными\r\n\r\n" +
        "удалить приложение с устройства\r\n\r\nМы можем удалить или приостановить аккаунт пользователя, если:\r\n\r\nнарушены правила\r\n\r\nсовершены незаконные действия\r\n\r\n" +
        "есть угрозы для других пользователей или работы сервиса\r\n\r\nаккаунт использовался для мошенничества или вреда";
        string GetRightsText() => "10. Изменение политики использования\r\n\r\n" +
        "Мы оставляем за собой право вносить изменения в настоящее Соглашение.\r\n\r\n" +
        "При значительных изменениях пользователь будет уведомлён:\r\n\r\nчерез приложение\r\n\r\nуведомлением при входе\r\n\r\n" +
        "публикацией обновлённой версии документа\r\n\r\n11. Контакты\r\n\r\nПо любым вопросам, связанным с использованием приложения, " +
        "вы можете обратиться в службу поддержки через:\r\n\r\ntg : @podBorschyom\r\n\r\nemail : newshr4m@gmail.com";
    }